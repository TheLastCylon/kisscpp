<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>KISSCPP: Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">KISSCPP
   </div>
   <div id="projectbrief">a C++ library for rapid application development</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Logging </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>All but the most trivial of applications, require logging at some level. KISSCPP has been designed with logging in mind, and presents the developer with a mechanism that closely emulates C++ streams, through the use of the LogStream class.</p>
<p>Each KISSCPP application is restricted to having one log file, but you can log to that file, from anywhere in the application.</p>
<h2>Introduciton to log levels</h2>
<p>There are nine log levels, divided into three log types and each log type has three severity levels.</p>
<p>The three types of logs are <em>error</em>, <em>info</em> and <em>debug</em>. Refer to the table below for more detail on each.</p>
<table class="doxtable">
<tr>
<th align="center"><b>Log Type</b> </th><th align="left"><b>Purpose</b>  </th></tr>
<tr>
<td align="center">error </td><td align="left">Used to log actual processing errors, logs of this type are always at a higher log level than other log types. </td></tr>
<tr>
<td align="center">info </td><td align="left">For logging things that are valuable information on a live system. Typically things like business logic events. </td></tr>
<tr>
<td align="center">debug </td><td align="left">For use during development and stabilization of your applications. You should not be using this log type on a production system. </td></tr>
</table>
<p>Each of the above log types have three levels of severity associated with them. Those severities are <em>low</em>, <em>normal</em> and <em>high</em>.</p>
<p>The combination of a log type and severity, gives you a logging level. The table bellow shows the various log levels associated with a type and severity combination.</p>
<table class="doxtable">
<tr>
<th align="center">Log Level </th><th align="center">Type </th><th align="center">Severity  </th></tr>
<tr>
<td align="center">9 </td><td align="center">error </td><td align="center">high </td></tr>
<tr>
<td align="center">8 </td><td align="center">error </td><td align="center">normal </td></tr>
<tr>
<td align="center">7 </td><td align="center">error </td><td align="center">low </td></tr>
<tr>
<td align="center">6 </td><td align="center">info </td><td align="center">high </td></tr>
<tr>
<td align="center"><b>5</b> </td><td align="center"><b>info</b> </td><td align="center"><b>normal</b> </td></tr>
<tr>
<td align="center">4 </td><td align="center">info </td><td align="center">low </td></tr>
<tr>
<td align="center">3 </td><td align="center">debug </td><td align="center">high </td></tr>
<tr>
<td align="center">2 </td><td align="center">debug </td><td align="center">normal </td></tr>
<tr>
<td align="center">1 </td><td align="center">debug </td><td align="center">low </td></tr>
</table>
<p>KISSCPP defaults to a logging level of 5.</p>
<p>i.e. logs of type <b>info</b> with severity <b>normal</b>, or combinations that result in a higher log level, will be written.</p>
<p>Yes, that is honestly how simple it is. KISSCPP <b>will not support</b> the ridiculous number of logging levels supplied by other libraries. If a developer can not work with only 9 log levels, 15 levels won't be enough either. There will be no support for so called "log filtering" either. Filtering huge amounts of text is well covered by tools like <b>grep</b>, <b>sed</b> and <b>awk</b>. Even the most stringent logging practices, are easily managed with those tools.</p>
<h2>Using logging in your programs.</h2>
<p>The header file you'll be needing is: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="logstream_8hpp.html">kisscpp/logstream.hpp</a>&gt;</span></div>
</div><!-- fragment --><p>And here is an example of some code: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> myFunction()</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="classkisscpp_1_1_log_stream.html">kisscpp::LogStream</a> my_log(__PRETTY_FUNCTION__);                    <span class="comment">// Instantiate a LogStream class.</span></div>
<div class="line">                                                                     <span class="comment">// Technically you can set the log source to be any arbitrary string here.</span></div>
<div class="line">                                                                     <span class="comment">// Setting it to the value of __PRETTY_FUNCTION__ is good practice though,</span></div>
<div class="line">                                                                     <span class="comment">// and you should be doing it.</span></div>
<div class="line"></div>
<div class="line">  my_log &lt;&lt; <a class="code" href="namespacekisscpp_1_1manip.html#aee465aa1a8d15e1750422696f7d3dc81">kisscpp::manip::info_normal</a>                              <span class="comment">// Set the level of this log line</span></div>
<div class="line">                                                                     <span class="comment">// Untill you change it, this will be the log level of all subsiquent log lines, logged</span></div>
<div class="line">                                                                     <span class="comment">// using this instance of LogStream.</span></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;This is an informational log, at normal severity&quot;</span>       <span class="comment">// Log your message.</span></div>
<div class="line">         &lt;&lt; <a class="code" href="namespacekisscpp_1_1manip.html#ad682f16cb474bc7ff2c991ad2c45db66">kisscpp::manip::endl</a>;                                    <span class="comment">// Mark the end of your log line.</span></div>
<div class="line"></div>
<div class="line">  my_log &lt;&lt; <span class="stringliteral">&quot;This is still an informational log, at normal severity&quot;</span> <span class="comment">// Another log message</span></div>
<div class="line">         &lt;&lt; <a class="code" href="namespacekisscpp_1_1manip.html#ad682f16cb474bc7ff2c991ad2c45db66">kisscpp::manip::endl</a>;                                    <span class="comment">// Mark the end of your log line.</span></div>
<div class="line"></div>
<div class="line">  my_log &lt;&lt; <a class="code" href="namespacekisscpp_1_1manip.html#aaf086b98ab45fa8c08557762e019afb7">kisscpp::manip::debug_high</a>                               <span class="comment">// Set the log level again.</span></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;This is now a debug log, at high severity&quot;</span>              <span class="comment">// Another message.</span></div>
<div class="line">         &lt;&lt; <a class="code" href="namespacekisscpp_1_1manip.html#ad682f16cb474bc7ff2c991ad2c45db66">kisscpp::manip::endl</a>;                                    <span class="comment">// Mark the end of your log line.</span></div>
<div class="line"></div>
<div class="line">  my_log &lt;&lt; <span class="stringliteral">&quot;This is still a debug log, at high severity&quot;</span>            <span class="comment">// Another message.</span></div>
<div class="line">         &lt;&lt; <a class="code" href="namespacekisscpp_1_1manip.html#a416806b7a937a2437ffadb9b523e1cf3">kisscpp::manip::flush</a>;                                   <span class="comment">// Force a flush of the content of the log buffer to file.</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2>Log line format</h2>
<div class="fragment"><div class="line">&lt;ISO Formatted Time-stamp&gt; [&lt;log <a class="code" href="namespacekisscpp_1_1manip_1_1helpers.html#a97784407250b5ea47c0b20441a7472e5">source</a> identifier&gt;] &lt;+|-|:&gt; &lt;message&gt;</div>
</div><!-- fragment --><p>Where:</p>
<ul>
<li>(+) Indicates the point at which the LogStream object is created.</li>
<li>(-) Indicates the point at which the LogStream object is destroyed.</li>
<li>(:) Indicates a log line sent at a point between (+) and (-)</li>
</ul>
<p>e.g. </p>
<div class="fragment"><div class="line">20141013T154716.537732 [<span class="keywordtype">void</span> myFunction()] +</div>
<div class="line">20141013T154716.537732 [<span class="keywordtype">void</span> myFunction()] : This is an informational log, at <a class="code" href="namespacekisscpp_1_1manip.html#a8f9aa3f28fd54225dee006e014efcf65">normal</a> severity</div>
<div class="line">20141013T154716.537732 [<span class="keywordtype">void</span> myFunction()] : This is still an informational log, at <a class="code" href="namespacekisscpp_1_1manip.html#a8f9aa3f28fd54225dee006e014efcf65">normal</a> severity</div>
<div class="line">20141013T154716.537732 [<span class="keywordtype">void</span> myFunction()] : This is now a <a class="code" href="namespacekisscpp_1_1manip.html#a795be5b59b6a02e1d8f6d9d5bb41c3a4">debug</a> log, at <a class="code" href="namespacekisscpp_1_1manip.html#a210331dfe6a9773c4e8e1db1e889820b">high</a> severity</div>
<div class="line">20141013T154716.537732 [<span class="keywordtype">void</span> myFunction()] : This is still a <a class="code" href="namespacekisscpp_1_1manip.html#a795be5b59b6a02e1d8f6d9d5bb41c3a4">debug</a> log, at <a class="code" href="namespacekisscpp_1_1manip.html#a210331dfe6a9773c4e8e1db1e889820b">high</a> severity</div>
<div class="line">20141013T154716.537732 [<span class="keywordtype">void</span> myFunction()] -</div>
</div><!-- fragment --><h2>Log file naming standard</h2>
<p>KISSCPP applications will have log files named as follows:</p>
<div class="fragment"><div class="line">&lt;application-<span class="keywordtype">id</span>&gt;.&lt;application-instance-<span class="keywordtype">id</span>&gt;.log</div>
</div><!-- fragment --><p>i.e. An application with the id <b>foo</b>, being executed with an instance identifier of <b>bar</b> will write to a log file named:</p>
<div class="fragment"><div class="line">foo.bar.log</div>
</div><!-- fragment --><h2>Log file location</h2>
<p>As with configuration files KISSCPP has to consider more than just the developer. So here again, we have to enforce some standards. You will therefore only have control over the root directory where log files reside.</p>
<p>The default directory for logging, regardless of operating system, is **/tmp**. This can be over ridden through the use of the <b>KCPP_LOG_ROOT</b> and <b>KCPP_EXEC_ENV</b> environment variables.</p>
<p>The log file path, is constructed thus:</p>
<ul>
<li>Where <b>KCPP_LOG_ROOT</b> and <b>KCPP_EXEC_ENV</b> are used: $KCPP_LOG_ROOT/&lt;application-id&gt;/$KCPP_EXEC_ENV/&lt;application-log-file-name&gt;</li>
<li>Where only <b>KCPP_LOG_ROOT</b> is used: $KCPP_LOG_ROOT/&lt;application-id&gt;/&lt;application-log-file-name&gt;</li>
<li>Where <b>KCPP_LOG_ROOT</b> is not used: /tmp/&lt;application-id&gt;/&lt;application-log-file-name&gt;</li>
</ul>
<p>That means, when you have a KISSCPP application with the name <b>foo</b> and you start instance <b>bar</b> of it, while having <b>KCPP_LOG_ROOT</b> set to <b>/put/logfiles/here</b></p>
<p>Your application will place log files in:</p>
<ul>
<li>/put/logfiles/here/foo</li>
<li>and the log file name will be: foo.bar.log</li>
</ul>
<p>Meaning that the full path to the log file will be:</p>
<ul>
<li>/put/logfiles/here/foo/foo.bar.log</li>
</ul>
<p>If you take the extra measure of using <b>KCPP_EXEC_ENV</b> and set it to a value <b>live</b>, your application will write that same log file to:</p>
<ul>
<li>/put/logfiles/here/foo/live/foo.bar.log </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 20 2014 14:51:55 for KISSCPP by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
